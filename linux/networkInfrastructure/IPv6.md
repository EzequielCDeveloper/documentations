# IPv6

## Theory

IPv6, successor to IPv4, is a newer version of the IP protocol designed to fix its flaws, most notably the scarcity of available IP addresses. This protocol handles the network layer; its purpose is to provide a way to address machines, to convey data to their intended destination, and to handle data fragmentation if needed (in other words, to split packages into chunks with a size that dependes on the network links to be used on the path and to reassembre the chunks in their poroper order on arrival).

Debian kernel include IPv6 handling in the core kernel (wih the exception of some architectures taht have it compiled as a module name ipv6). Basic tools such as **ping** and **traceroute** have their IPv6 equivalents in **ping6** and **traceroute6**, available respectibely in the iputils-ping and iputils-tracepath-packages.

The IPv6 network is configured similarly to IPv4, in /etc/network/interfaces. But if you want that network to be globally available, you must ensure that you have an IPv6-capable router relaying traffic to the global IPv6 network.

### Example fo IPv6 configuration

```bash
iface enp7s0 inet6 static
    address 2001:db8:1234:5::1:1/64
    # Disabling auto-configuration
    # autoconf 0
    # The router is auto-configured and has no fixed address
    # (accept_ra 1). If it had:
    # gateway 2001:db8:1234:5::1
```

IPv6 subnets usually have a netmask of 64 bits. This means that 2^64 distinct address exist within the subnet. This allows stateless address auto-configuration (SLAAC) to pick an address based on the network interface's MAC address. By default, if SLAAC is activated in your network and IPv6 on your computer, the kernel will automatically find IPv6 routers and configure the network interfaces.

This behabiour may have privacy implications. If you switch networks frequently, e.g. with a laptop, you might not want your MAC address being a part of your public IPv6 address. This makes it easy to identify the same device across networks. A solutino to this are IPv6 privacy extensions (which Debian enables by default if IPv6 connectivity is detected during initial installation) , which will assign an ddtionsal randomly generated address to the interface, periodically change them and prefer them for outgoing connections. Incomming connections can still use the address generated by SLAAC. The following example, for use in _/etc/network/interfaces_, activates these privacy extensions for the interface enp7s0.

### Example IPv6 privacy extensions

```bash
iface enp7s0 inet6 auto
    # Prefer the randomly assigned addresses for outgoing connections.
    privext 2
```

> Many pieces of software need to be adapted to handle IPv6. Most of the packages in Debian Have been adapted already, but not all. If your favorite package does not work with IPv6 yet, you can ask for help on the debian-ipv6 mailing-list. They might know about an IPv6 yet, you can ask for help on the debian-ipv6 mailing-list. They might know about an IPv6-aware replacement and could file a bug to get the issue properly tracked.
> IPv6 connections can be restricted, in the same fashion as for IPv4. nft can be used to create firewall rules for IPv4 and IPv6.

## References

<https://lists.debian.org/debian-ipv6/>
<https://tunnelbroker.net>
